<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <link rel="stylesheet" href="style.css"/>
  </head>
  <body>
  </script>
    <div class="grid" id="grid">
      <div>

      </div>
      <div class="viewport" id="browser">
      </div>
      <div class="other" id="other">
        <div>go crazy <input id="crazy" type="checkbox"/></div>
        <div>shy track <input id="track" type="checkbox" checked/></div>
        <div>labels bold <input id="labels-bold" type="checkbox" checked/></div>
        <div>labels shy <input id="labels-shy" type="checkbox" checked/></div>
        <div>bluer text <input id="bluer" type="checkbox" checked/></div>
        <div>bigger text <input id="bigger" type="checkbox" checked/></div>
      </div>
    </div>
    <script type="module">
      import { GenomeBrowser, test, default as init } from './pkg/peregrine_generic.js';
      await init();
      let genome_browser = new GenomeBrowser();
      genome_browser.go();
      genome_browser.set_message_reporter(function(x) {
        console.error(x);
      });
      genome_browser.set_stick("homo_sapiens_GCA_000001405_27:1");
      genome_browser.set_switch(["track","gene-pc-fwd"]);
      genome_browser.set_x(2500000);
      genome_browser.set_bp_per_screen(1000000);
      genome_browser.set_switch(["settings"]);

      function flipper(path) {
          let flip = false;
          let out = function() {
              if(flip) {
                  genome_browser.clear_switch(path);
              } else {
                  genome_browser.set_switch(path);
              }
              flip=!flip;
          };
          out(); // onby default is better
          return out;
      }

      document.getElementById("track").onclick = flipper(["track","gene-pc-rev"]);
      document.getElementById("labels-bold").onclick = flipper(["track","gene-pc-fwd","label"]);
      document.getElementById("labels-shy").onclick = flipper(["track","gene-pc-rev","label"]);
      document.getElementById("bluer").onclick = flipper(["settings","bluer"]);
      document.getElementById("bigger").onclick = flipper(["settings","bigger"]);
      document.getElementById("crazy").onclick = function() {
        test(genome_browser.copy());
      };
    </script>
  </body>
</html>
