version: "3"
services:
    backend-hi:
        build: ../../backend-server
        ports:
            - 3333:3333
        volumes:
            - ${DATA_PATH:-.}:/data
            - ${LOG_DIR:-.}:/logs
        environment:
            - MEMCACHED=memcached:11211
            - LOG_PATH=/logs/backend-hi.log
            - THREADS=16
            - DEBUG
        networks:
            - default

    backend-lo:
        build: ../../backend-server
        ports:
            - 3334:3333
        volumes:
            - ${DATA_PATH:-.}:/data
            - ${LOG_DIR:-.}:/logs
        environment:
            - MEMCACHED=memcached:11211
            - LOG_PATH=/logs/backend-lo.log
            - DEBUG
            - THREADS=4
        networks:
            - default

    memcached:
        build: ../../memcached-container
        ports:
            - 11211:11211
        environment:
            - MEMCACHED_MB=1024
        networks:
            - default
